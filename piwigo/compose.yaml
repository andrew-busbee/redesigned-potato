version: "2.1"
services:
  piwigo:
    image: ghcr.io/linuxserver/piwigo
    container_name: Piwigo
    environment:
      - PUID=${MYPUID}
      - PGID=${MYPGID}
      - TZ=Europe/Bucharest
    volumes:
      - piwigo-config:/config
      - photos:/gallery
    ports:
      - ${PIWIGOPORT}:80
    restart: always
  db:
    image: mysql
    container_name: Piwigo-DB
    restart: always
    environment:
      MYSQL_ROOT_PASSWORD: ${ROOTPWD}
      MYSQL_DATABASE: ${DBNAME}
      MYSQL_USER: ${DBUSER}
      MYSQL_PASSWORD: ${DBPWD}
    volumes:
      - piwigo-data:/var/lib/mysql
      
volumes:
  piwigo-config:
    external: true
    name: piwigo-config  #Name of existing volume     
  piwigo-data:
    external: true
    name: piwigo-data  #Name of existing volume 
  photos:
    external: true
    name: photos  #Name of existing volume
